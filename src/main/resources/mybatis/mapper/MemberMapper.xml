<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.example.demo.mapper.MemberMapper">

    <insert id="insertMember" parameterType="MemberDto" useGeneratedKeys="true" keyProperty="id">
        INSERT INTO member (name, email)
        VALUES (#{name}, #{email})
    </insert>

    <!-- select ë‹¨ê³„ 2. -->
    <select id="selectMemberList"
            resultType="com.example.demo.dto.MemberDto">
            -- ã„´resultType = DTO í’€íŒ¨í‚¤ì§€ëª…
        SELECT
            id,
            name,
            email,
            created_at
        FROM member
            -- ì»¬ëŸ¼(column)ëª… = DTO í•„ë“œëª…(camelCase ìë™ ë§¤í•‘)
        ORDER BY id DESC
    </select>

    <!-- CRUD Update ë‹¨ê³„ 3. -->
    <select id="selectMemberById" resultType="com.example.demo.dto.MemberDto">
        SELECT id, name, email, created_at
        FROM member
        WHERE id = #{id}
    </select>
    <!-- CRUD Update ë‹¨ê³„ 7-2. -->
    <update id="updateMember">
        UPDATE member
        SET
            name = #{name},
            email = #{email}
        WHERE id = #{id}
    </update>
            <!--ì´ëŸ° update SQL ì“°ëŠ” ë°©ë²•ë„ ìˆìŒ (ì‹¤ë¬´í˜•)-->
                <!-- ğŸ“Œí¬ì¸íŠ¸: ê°’ì´_ì—†ìœ¼ë©´_í•´ë‹¹ì»¬ëŸ¼ì€_ê±´ë“œë¦¬ì§€ì•ŠìŒ / <set> ë•ë¶„ì—_ë§ˆì§€ë§‰ì½¤ë§ˆ_ê±±ì •X   -->
            <!--<update id="updateMember">-->
            <!--    UPDATE member-->
            <!--    <set>-->
            <!--        <if test="name != null and name != ''">-->
            <!--            name = #{name},-->
            <!--        </if>-->
            <!--        <if test="email != null and email != ''">-->
            <!--            email = #{email},-->
            <!--        </if>-->
            <!--    </set>-->
            <!--    WHERE id = #{id}-->
            <!--</update>-->



    <!-- CRUD Delete ë‹¨ê³„ 5. -->
    <delete id="deleteMember">
        DELETE FROM member
        WHERE id = #{id}
    </delete> <!-- âš ï¸ ê¼­ í™•ì¸í•˜ê¸° : â— WHERE ì—†ëŠ” DELETE =    -->
                            <!--    ğŸ‘‰ í…Œì´ë¸” ì „ì²´ ì‚­ì œ / ì‚¬ê³  ë³´ê³ ì„œ ì •ë„ ìˆ˜ì¤€ì˜ ì˜ëª». -->
<!--    ê·¸ë˜ì„œ ì´ëŸ° ë°©ë²•ë„ ìˆìŒ (Soft Delete)     -->
    <!--  SQLë¬¸ ì“°ëŠ” ê³³ì—ë‹¤ ì´ë ‡ê²Œ ë¨¼ì € ì¨ì£¼ê³  -->
                        <!--  ALTER TABLE member ADD deleted_yn CHAR(1) DEFAULT 'N';  -->
<!--        UPDATE member
            SET deleted_yn = 'Y'
            WHERE id = #{id};
-->
<!--    ê·¸ë¦¬ê³  select í•  ë•Œ:
            WHERE deleted_yn = 'N'
        -->
<!--    ì—¥ ì´ê±° ì–´ì¼€í•˜ëŠ”ê±°ì„-->



</mapper>